!function(){"use strict";class e{constructor(e,t){this._settings=e,this._formElement=document.querySelector(t),this._inputList=[...this._formElement.querySelectorAll(this._settings.inputSelector)],this._submitButton=this._formElement.querySelector(this._settings.submitButtonSelector),this._setEventListeners()}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-Error`);t.textContent=e.validationMessage,t.classList.add(this._settings.errorClass),e.classList.add(this._settings.inputErrorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-Error`);t.textContent="",t.classList.remove(this._settings.errorClass),e.classList.remove(this._settings.inputErrorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._submitButton.disabled=!0,this._submitButton.classList.add(this._settings.inactiveButtonClass)):(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._settings.inactiveButtonClass))}_setEventListeners(){this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>e.preventDefault())),this._setEventListeners(),this._toggleButtonState()}}const t={inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__submit-button-disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},s=document.querySelector("#profileAddButton"),r=document.querySelector("#profileEditButton"),i=(document.querySelector("#cardCloseButton"),document.querySelector("#modalButton"),document.querySelector("#modalCardPreviewCloseButton"),document.querySelector("#profileImageEdit"));document.querySelector("#profileCloseButton"),document.querySelector("#profileEditImage"),document.querySelector("#profileNameInput"),document.querySelector("#profileDescriptionInput"),document.querySelector("#profileEditForm"),document.querySelector("#profileEditModal"),document.querySelector("#cardAddForm"),document.querySelector("#cardAddModal"),document.querySelector("#profileNameInput"),document.querySelector("#profileDescriptionInput"),document.querySelector("#cardTitleInput"),document.querySelector("#cardImageInput"),document.querySelector("#profileName"),document.querySelector("#profileDescription"),document.querySelector("#profileImage");class n{constructor(e){let{cardData:t,cardSelector:s,handleCardPreview:r,handleDeleteClick:i,handleCardLike:n}=e;this._id=t._id,this._text=t.name,this._link=t.link,this._isLiked=t.isLiked,this._cardSelector=s,this._handlePreviewImage=r,this._handleDeleteCard=i,this._handleCardLike=n}_getTemplate(){const e=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0);return e.id=`card_${this._id}`,e}_setCardText(){this._element.querySelector(".card__title").textContent=this._text}_setCardImage(){this._imageElement.src=this._link,this._imageElement.alt=this._text}_setCardLike(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}_toggleLike(){this._handleCardLike(this._id,this._isLiked),this._likeButton.classList.toggle("card__like-button_active")}_handleImageClick(){const e={name:this._text,link:this._link};this._handlePreviewImage(e)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._toggleLike()})),this._deleteButton.addEventListener("click",(()=>{this._deleteCard()})),this._imageElement.addEventListener("click",(()=>{this._handleImageClick()}))}_deleteCard(){this._handleDeleteCard(this._id)}getView(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector(".card__delete-button"),this._imageElement=this._element.querySelector(".card__image"),this._setCardText(),this._setCardImage(),this._setCardLike(),this._setEventListeners(),this._element}updateLikes(e){}}class o{constructor(e){this._modal=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closeButton=this._modal.querySelector(".modal__close")}_handleEscClose(e){"Escape"!==e.key&&"Escape"!==e.code||this.close()}open(){this._modal.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._modal.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._closeButton.addEventListener("click",(()=>this.close())),this._modal.addEventListener("mousedown",(e=>{e.target.classList.contains("modal__wrapper")&&this.close()}))}}class a extends o{constructor(e,t){super(e),this._handleFormSubmit=t,this._modalForm=this._modal.querySelector("form"),this._inputList=this._modalForm.querySelectorAll(".modal__input"),this._submitBtn=this._modal.querySelector(".modal__save")}_getInputValues(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setApiCalling(e){this._submitBtn.textContent=e?"Saving ...":"Save"}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}close(){super.close(),this._modalForm.reset()}}class l{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}removeItem(e){const t=this._container.querySelector(`#card_${e}`);t?.remove()}}const d=new class{constructor(e){let{baseUrl:t,headers:s}=e;this.baseUrl=t,this.headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this.baseUrl}/users/me`,{headers:this.headers}).then(this._handleResponse)}setProfileImage(e){return fetch(`${this.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}getProfileInfo(e){return fetch(`${this.baseUrl}/users/me`,{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name,about:e.description})}).then(this._handleResponse)}getInitialCards(){return fetch(`${this.baseUrl}/cards`,{method:"GET",headers:this.headers}).then(this._handleResponse)}getWebpageInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}addCard(e){return fetch(`${this.baseUrl}/cards`,{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponse)}deleteCard(e){return fetch(`${this.baseUrl}/cards/${e}`,{method:"DELETE",headers:this.headers}).then(this._handleResponse)}addLike(e){return fetch(`${this.baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this.headers}).then(this._handleResponse)}removeLike(e){return fetch(`${this.baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this.headers}).then(this._handleResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"68a8781d-0ef6-4f31-8a00-f95473676b23","Content-Type":"application/json"}});let c,h;const u=new class extends o{constructor(e){super(e),this._modalImage=this._modal.querySelector(".modal__preview-image"),this._modalCaption=this._modal.querySelector(".modal__caption")}open(e){this._modalImage.src=e.link,this._modalImage.alt=e.name,this._modalCaption.textContent=e.name,super.open()}}("#cardPreviewModal");u.setEventListeners();const m=new class extends o{constructor(e,t){super(e),this._submitButton=this._modal.querySelector(".modal__save"),this._modalForm=this._modal.querySelector(".modal__form"),this._delCardInput=this._modal.querySelector("#delCardId"),this._handleFormSubmit=t}setApiCalling(e){this._submitButton.textContent=e?"Deleting ...":"Yes"}setDelCardId(e){this._delCardInput.value=e}setEventListeners(){super.setEventListeners(),this._modalForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._delCardInput.value)}))}}("#deleteCardModal",(e=>{m.setApiCalling(!0),d.deleteCard(e).then((()=>{m.close(),h.removeItem(e)})).catch((e=>console.log(`An error occurred when deleting card: ${e}`))).finally((()=>m.setApiCalling(!1)))}));m.setEventListeners();const _=e=>{const t=new n({cardData:{...e,userId:c},handleCardPreview:e=>{u.open(e)},handleDeleteClick:e=>{m.setDelCardId(e),m.open()},handleCardLike:(e,s)=>{s?d.removeLike(e).then((e=>{t.updateLikes(e.likes)})).catch((e=>console.log(`An error occurred when removing a like: ${e}`))):d.addLike(e).then((e=>{t.updateLikes(e.likes)})).catch((e=>console.log(`An error occurred when adding a like: ${e}`)))},cardSelector:"#cardTemplate"});return t.getView()},p=new class{constructor(e){let{nameSelector:t,descSelector:s,avatarSelector:r}=e;this._userName=document.querySelector(t),this._userDescription=document.querySelector(s),this._userImage=document.querySelector(r)}getAvatar(){return this._userImage.src}setAvatar(e){this._userImage.src=e}getUserInfo(){return{userName:this._userName.textContent,userDescription:this._userDescription.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._userName.textContent=t,this._userDescription.textContent=s}}({nameSelector:"#profileName",descSelector:"#profileDescription",avatarSelector:"#profileImage"});d.getWebpageInfo().then((e=>{let[t,s]=e;c=s._id,h=new l({items:t,renderer:e=>{const t=_(e);h.addItem(t)}},".cards"),h.renderItems(),p.setUserInfo({name:s.name,description:s.about}),p.setAvatar(s.avatar)})).catch((e=>console.log(`An error occurred when loading initial user and card data: ${e}`)));const g=new a("#cardAddModal",(e=>{const t={name:e["card-title-input"],link:e["card-image-input"]};g.setApiCalling(!0),d.addCard(t).then((e=>{const t=_(e);h.addItem(t),g.close()})).catch((e=>console.log(`An error occurred when loading new card data: ${e}`))).finally((()=>g.setApiCalling(!1)))}));g.setEventListeners(),s.addEventListener("click",(()=>{v._toggleButtonState(),g.open()}));const v=new e(t,"#cardAddForm");v.enableValidation();const S=new a("#profileEditModal",(e=>{S.setApiCalling(!0),d.getProfileInfo(e).then((()=>{p.setUserInfo(e),S.close()})).catch((e=>console.log(`An error occurred when loading user profile data: ${e}`))).finally((()=>S.setApiCalling(!1)))}));S.setEventListeners(),r.addEventListener("click",(()=>{const{userName:e,userDescription:t}=p.getUserInfo();profileNameInput.value=e,profileDescriptionInput.value=t,C._toggleButtonState(),S.open()}));const C=new e(t,"#profileEditForm");C.enableValidation();const E=new a("#updateAvatarModal",(e=>{const t=e.avatar;E.setApiCalling(!0),d.setProfileImage(t).then((e=>{p.setAvatar(t),E.close()})).catch((e=>console.log(`An error occured when loading avatar data: ${e}`))).finally((()=>E.setApiCalling(!1)))}));E.setEventListeners();const f=new e(t,"#updateAvatarForm");f.enableValidation(),i.addEventListener("click",(()=>{f._toggleButtonState(),E.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFJb0IsZUFBZUMsR0FDaEJULE1BQUssS0FDSnNDLEVBQVlXLFlBQVl4QyxHQUN4QmdELEVBQWdCckcsT0FBTyxJQUV4QjJFLE9BQU9DLEdBQ05DLFFBQVFDLElBQUsscURBQW9ERixPQUVsRUcsU0FBUSxJQUFNc0IsRUFBZ0JyRixlQUFjLElBQU8sSUFFeERxRixFQUFnQmxHLG9CQUVoQm5ELEVBQWtCTixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNLFNBQUVpSixFQUFRLGdCQUFFQyxHQUFvQlYsRUFBWXhDLGNBQ2xENEQsaUJBQWlCdkYsTUFBUTRFLEVBQ3pCWSx3QkFBd0J4RixNQUFRNkUsRUFDaENZLEVBQXlCaEwscUJBQ3pCNkssRUFBZ0JwRyxNQUFNLElBRXhCLE1BQU11RyxFQUEyQixJQUFJbk0sRUFDbkN5QyxFTDdHVSxvQktnSFowSixFQUF5QjdKLG1CQUV6QixNQUFNOEosRUFBbUIsSUFBSW5HLEVMcEdkLHNCS29Hb0QrQyxJQUNqRSxNQUFNcUQsRUFBYXJELEVBQUtGLE9BQ3hCc0QsRUFBaUJ6RixlQUFjLEdBQy9CZ0IsRUFDR2EsZ0JBQWdCNkQsR0FDaEI5RCxNQUFNUyxJQUNMNkIsRUFBWVEsVUFBVWdCLEdBQ3RCRCxFQUFpQnpHLE9BQU8sSUFFekIyRSxPQUFPQyxHQUNOQyxRQUFRQyxJQUFLLDhDQUE2Q0YsT0FFM0RHLFNBQVEsSUFBTTBCLEVBQWlCekYsZUFBYyxJQUFPLElBRXpEeUYsRUFBaUJ0RyxvQkFFakIsTUFBTXdHLEVBQXNCLElBQUl0TSxFQUM5QnlDLEVMbElZLHFCS3FJZDZKLEVBQW9CaEssbUJBQ3BCTSxFQUFpQlAsaUJBQWlCLFNBQVMsS0FDekNpSyxFQUFvQm5MLHFCQUNwQmlMLEVBQWlCeEcsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Nb2RhbFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZvcm1WYWxpZGF0b3IuanNcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1FbGVtZW50U2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3NldHRpbmdzLmlucHV0U2VsZWN0b3IpLFxyXG4gICAgXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIHRoaXMuX3NldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcblxyXG4gIC8vIEVuYWJsZSBzdWJtaXQgYnV0dG9uIGFmdGVyIHZhbGlkYXRpb25cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICAvLyBQcml2YXRlIG1ldGhvZCB0byBzaG93IGFuIGVycm9yIG1lc3NhZ2UgKGludmFsaWQgaW5wdXQgZWxlbWVudClcclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1FcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5lcnJvckNsYXNzKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICAgLy8gUHJpdmF0ZSBtZXRob2QgdG8gaGlkZSB0aGUgZXJyb3IgbWVzc2FnZSAodmFsaWQgaW5wdXQgZWxlbWVudClcclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1FcnJvcmBcclxuICAgICk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuZXJyb3JDbGFzcyk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2QgKGNoZWNrIHRoZSB2YWxpZGl0eSBvZiBhbiBpbnB1dCBlbGVtZW50IGFuZCBzaG93L2hpZGUgdGhlIGVycm9yIG1lc3NhZ2UpXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIC8vIENoZWNrIGlmIGFueSBvZiB0aGUgaW5wdXRzIGlzIGludmFsaWRcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgICAgLy8gQ2hlY2sgaWYgYW55IG9mIHRoZSBpbnB1dHMgaXMgaW52YWxpZFxyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgICAvLyBJZiB5ZXMsIGRpc2FibGUgdGhlIGJ1dHRvbiBhbmQgYWRkIHRoZSBpbmFjdGl2ZSBjbGFzc1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIGlmIG5vLCBlbmFibGUgdGhlIGJ1dHRvbiBhbmQgcmVtb3ZlIHRoZSBpbmFjdGl2ZSBjbGFzc1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgLy8gTG9vcCB0aHJvdWdoIHRoZSBpbnB1dHMgYW5kIGFkZCBpbnB1dCBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGlucHV0IHZhbGlkaXR5IGFuZCB0b2dnbGUgdGhlIGJ1dHRvbiBzdGF0ZVxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIC8vIFRvZ2dsZSB0aGUgYnV0dG9uIHN0YXRlXHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbi8vIFB1YmxpYyBtZXRob2RzXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgc3VibWl0IGJlaGF2aW9yIG9mIHRoZSBmb3JtXHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xyXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVycyB0byB0aGUgZm9ybSBlbGVtZW50c1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIC8vIFNldCBpbml0aWFsIGJ1dHRvbiBzdGF0ZVxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuIiwiLy8gSW4gY29uc3RhbnRzLmpzXHJcblxyXG4vLyBBcnJheSBvZiBpbml0aWFsIGNhcmQgZGF0YVxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbi8vIE9iamVjdCBjb25maWd1cmF0aW9uIGZvciBmb3JtIHZhbGlkYXRpb25cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZV9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuXHJcbi8vIFZhbGlkYXRpb24gY29uZmlndXJhdGlvblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmVcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19zdWJtaXQtYnV0dG9uLWRpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxyXG59O1xyXG5cclxuLy8gQXBpIGNvbmZpZ1xyXG5leHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjY4YTg3ODFkLTBlZjYtNGYzMS04YTAwLWY5NTQ3MzY3NmIyM1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuXHJcbi8vIFNlbGVjdG9ycyBmb3IgRE9NIGVsZW1lbnRzXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZExpc3Q6IFwiLmNhcmRzX19saXN0XCIsXHJcbiAgY2FyZFRlbXBsYXRlOiBcIiNjYXJkVGVtcGxhdGVcIixcclxuICAvLyBGb3Jtc1xyXG4gIGFkZEZvcm06IFwiI2NhcmRBZGRGb3JtXCIsXHJcbiAgZWRpdEZvcm06IFwiI3Byb2ZpbGVFZGl0Rm9ybVwiLFxyXG4gIGF2YXRhckZvcm06IFwiI3VwZGF0ZUF2YXRhckZvcm1cIixcclxuICAvLyBQcm9maWxlIEVsZW1lbnRzXHJcbiAgbmFtZTogXCIjcHJvZmlsZU5hbWVcIixcclxuICBkZXNjcmlwdGlvbjogXCIjcHJvZmlsZURlc2NyaXB0aW9uXCIsXHJcbiAgaW1hZ2U6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbiAgLy8gQnV0dG9uc1xyXG4gIGNsb3NlQnV0dG9uOiBcIi5tb2RhbF9fY2xvc2VcIixcclxuICBlZGl0UHJvZmlsZUJ1dHRvbjogXCIjcHJvZmlsZUVkaXRCdXR0b25cIixcclxuICBhZGRDYXJkQnV0dG9uOiBcIiNwcm9maWxlQWRkQnV0dG9uXCIsXHJcbiAgLy8gTW9kYWxcclxuICBjYXJkUHJldmlld01vZGFsOiBcIiNjYXJkUHJldmlld01vZGFsXCIsXHJcbiAgZGVsZXRlTW9kYWw6IFwiI2RlbGV0ZUNhcmRNb2RhbFwiLFxyXG4gIHByb2ZpbGVFZGl0TW9kYWw6IFwiI3Byb2ZpbGVFZGl0TW9kYWxcIixcclxuICBhdmF0YXJNb2RhbDogXCIjdXBkYXRlQXZhdGFyTW9kYWxcIixcclxufTtcclxuXHJcbi8vIERPTSBlbGVtZW50IHJlZmVyZW5jZXNcclxuLy8gYnV0dG9uc1xyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUFkZEJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlRWRpdEJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkQ2xvc2VCdXR0b25cIik7XHJcbmV4cG9ydCBjb25zdCBhZGRTYXZlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbEJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWxDYXJkUHJldmlld0Nsb3NlQnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZUVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVJbWFnZUVkaXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVDbG9zZUJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlRWRpdEltYWdlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZU5hbWVJbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlRGVzY3JpcHRpb25JbnB1dFwiXHJcbik7XHJcblxyXG4vLyBtb2RhbFxyXG5leHBvcnQgY29uc3QgcG9wdXBFZGl0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUVkaXRGb3JtXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUVkaXRNb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkQWRkRm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRBZGRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZEFkZE1vZGFsXCIpO1xyXG5leHBvcnQgY29uc3QgbmFtZUlucHV0VmFsdWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVOYW1lSW5wdXRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9mZXNzaW9uSW5wdXRWYWx1ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZURlc2NyaXB0aW9uSW5wdXRcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgdGl0bGVJbnB1dFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkVGl0bGVJbnB1dFwiKTtcclxuZXhwb3J0IGNvbnN0IGxpbmtJbnB1dFZhbHVlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkSW1hZ2VJbnB1dFwiKTtcclxuXHJcbi8vIHVzZXIgaW5mb1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVOYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlRGVzY3JpcHRpb25cIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZUltYWdlXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmVcIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsIi8vIENhcmQuanNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuXG4gIGNvbnN0cnVjdG9yKHtjYXJkRGF0YSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVDYXJkUHJldmlldywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUNhcmRMaWtlfSkge1xuICAgIHRoaXMuX2lkID0gY2FyZERhdGEuX2lkO1xuICAgIHRoaXMuX3RleHQgPSBjYXJkRGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBjYXJkRGF0YS5pc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVQcmV2aWV3SW1hZ2UgPSBoYW5kbGVDYXJkUHJldmlldztcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlQ2FyZExpa2UgPSBoYW5kbGVDYXJkTGlrZTtcbiAgIC8qIHRoaXMuX2xpa2VDb3VudCA9IDA7IC8vIEluaXRpYWxpemUgdGhlIGxpa2UgY291bnQgdG8gMFxuICAgIHRoaXMuX2lzTGlrZWQgPSBmYWxzZTsgLy8gSW5pdGlhbGl6ZSB0aGUgbGlrZSBzdGF0ZSB0byBmYWxzZSovXG4gIH1cblxuICAvLyBQcml2YXRlIG1ldGhvZHNcbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIC8vIFRlbXBsYXRlIGVsZW1lbnQgZnJvbSB0aGUgRE9NXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQ7XG4gICAgLy8gUmV0dXJuIGNsb25lIHRlbXBsYXRlXG4gICAgY29uc3QgY2FyZCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xuICAgIGNhcmQuaWQgPSBgY2FyZF8ke3RoaXMuX2lkfWA7XG4gICAgcmV0dXJuIGNhcmQ7XG4gIH1cblxuICBfc2V0Q2FyZFRleHQoKSB7XG4gICAgLy8gRmluZCB0aGUgdGV4dCBlbGVtZW50IGluIHRoZSBjYXJkIGFuZCBzZXQgaXRzIGNvbnRlbnRcbiAgICBjb25zdCBjYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIGNhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl90ZXh0O1xuICB9XG5cbiAgX3NldENhcmRJbWFnZSgpIHtcbiAgICAvLyBTZXQgdGhlIGltYWdlIHNvdXJjZSBhbmQgYWx0IGF0dHJpYnV0ZVxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl90ZXh0O1xuICB9XG5cbiAgX3NldENhcmRMaWtlKCkge1xuICAgIGlmICh0aGlzLl9pc0xpa2VkKXtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cblxuICB9XG5cbiAgX3RvZ2dsZUxpa2UoKSB7XG4gICAgLy8gVG9nZ2xlIHRoZSBsaWtlIGJ1dHRvbiBjbGFzcyBvbiBjbGlja1xuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlKHRoaXMuX2lkLCB0aGlzLl9pc0xpa2VkKTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlSW1hZ2VDbGljaygpIHtcbiAgICAvLyBPcGVuIGEgcG9wdXAgd2l0aCB0aGUgaW1hZ2UgYW5kIHRleHQgb24gY2xpY2tcbiAgICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX3RleHQsXG4gICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgIH07XG4gICAgdGhpcy5faGFuZGxlUHJldmlld0ltYWdlKGNhcmREYXRhKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyBBZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRoZSBjYXJkIGVsZW1lbnRzXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5fdG9nZ2xlTGlrZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9kZWxldGVDYXJkKCk7IC8vIENhbGwgdGhlIGRlbGV0ZUNhcmQgbWV0aG9kXG4gICAgfSk7XG5cbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9kZWxldGVDYXJkKCkge1xuICAgIC8vIFJlbW92ZSB0aGUgY2FyZCBlbGVtZW50XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9pZCk7XG4gIH1cblxuICAvLyBQdWJsaWMgbWV0aG9kXG4gIGdldFZpZXcoKSB7XG4gICAgLy8gQ2FyZCBlbGVtZW50IHVzaW5nIHRoZSB0ZW1wbGF0ZVxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuXG4gICAgLy8gUmVmZXJlbmNlcyB0byBlbGVtZW50c1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuXG4gICAgLy8gU2V0IGNhcmQgdGV4dCBhbmQgaW1hZ2VcbiAgICB0aGlzLl9zZXRDYXJkVGV4dCgpO1xuICAgIHRoaXMuX3NldENhcmRJbWFnZSgpO1xuICAgIHRoaXMuX3NldENhcmRMaWtlKCk7XG5cbiAgICAvLyBBdHRhY2ggZXZlbnQgbGlzdGVuZXJzIHRvIGNhcmQgZWxlbWVudHNcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgLy8gUmV0dXJuIHRoZSBjYXJkIGVsZW1lbnRcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIHVwZGF0ZUxpa2VzKGxpa2UpIHsvKlxuICAgIC8vIFRvZ2dsZSB0aGUgbGlrZSBzdGF0ZVxuICAgIHRoaXMuX2lzTGlrZWQgPSAhdGhpcy5faXNMaWtlZDtcblxuICAgIC8vIFVwZGF0ZSB0aGUgbGlrZSBjb3VudFxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQ291bnQrKztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUNvdW50LS07XG4gICAgfVxuICAgIC8vIFVwZGF0ZSB0aGUgbGlrZSBjb3VudCBkaXNwbGF5IG9uIHRoZSBjYXJkXG4gICAgY29uc3QgbGlrZUNvdW50RWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50XCIpO1xuICAgIGxpa2VDb3VudEVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlQ291bnQ7Ki9cbiAgfVxufVxuIiwiLy8gbW9kYWwuanNcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9tb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW9kYWxTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIiB8fCBlLmNvZGUgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX21vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX21vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG5cclxuICAgIHRoaXMuX21vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX193cmFwcGVyXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbiIsIi8vIE1vZGFsV2l0aEZvcm0uanNcclxuaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhGb3JtIGV4dGVuZHMgTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKG1vZGFsU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fbW9kYWxGb3JtID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9tb2RhbEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgLy8gUHJpdmF0ZSBtZXRob2Q6IEdldCB2YWx1ZXMgZnJvbSB0aGUgZm9ybSBpbnB1dHNcclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IChmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0QXBpQ2FsbGluZyhpc1NhdmluZykge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gaXNTYXZpbmcgPyBcIlNhdmluZyAuLi5cIiA6IFwiU2F2ZVwiO1xyXG4gIH1cclxuICAvLyBQdWJsaWMgbWV0aG9kOiBTZXQgaW5wdXQgdmFsdWVzIGluIHRoZSBmb3JtXHJcbiAgc2V0SW5wdXRWYWx1ZXMoY2FyZERhdGEpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC52YWx1ZSA9IGNhcmREYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBPdmVycmlkZSBzZXRFdmVudExpc3RlbmVycyBtZXRob2QgZnJvbSBwYXJlbnQgY2xhc3NcclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE92ZXJyaWRlIGNsb3NlIG1ldGhvZCBmcm9tIHBhcmVudCBjbGFzc1xyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX21vZGFsRm9ybS5yZXNldCgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUl0ZW0oaWQpIHtcclxuICAgIGNvbnN0IGNhcmQgPSB0aGlzLl9jb250YWluZXIucXVlcnlTZWxlY3RvcihgI2NhcmRfJHtpZH1gKTtcclxuICAgIGNhcmQ/LnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG4iLCIvLyBUb2tlbjpcIjY4YTg3ODFkLTBlZjYtNGYzMS04YTAwLWY5NTQ3MzY3NmIyM1wiXHJcbi8vIEltcG9ydCBuZWNlc3NhcnkgbW9kdWxlcyBhbmQgY29uc3RhbnRzXHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbi8vaW1wb3J0IGNvbnN0YW50c1xyXG5pbXBvcnQge1xyXG4gIGNvbmZpZyxcclxuICBpbml0aWFsQ2FyZHMsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBzZWxlY3RvcnMsXHJcbiAgc2V0dGluZ3MsXHJcbiAgYXBpQ29uZmlnLFxyXG4gIGFkZENhcmRCdXR0b24sXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUltYWdlRWRpdFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBNb2RhbFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IE1vZGFsV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL3V0aWxzL0FwaS5qc1wiO1xyXG5pbXBvcnQgTW9kYWxXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL01vZGFsV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5cclxuLy8gQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBBUEkgY2xhc3NcclxuY29uc3QgYXBpID0gbmV3IEFwaShhcGlDb25maWcpO1xyXG5sZXQgdXNlcklkO1xyXG5sZXQgY2FyZFNlY3Rpb247XHJcblxyXG5jb25zdCBjYXJkUHJldmlld01vZGFsID0gbmV3IE1vZGFsV2l0aEltYWdlKHNlbGVjdG9ycy5jYXJkUHJldmlld01vZGFsKTtcclxuY2FyZFByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZGVsZXRlRm9ybSA9IG5ldyBNb2RhbFdpdGhDb25maXJtYXRpb24oc2VsZWN0b3JzLmRlbGV0ZU1vZGFsLCAoaWQpID0+IHtcclxuICBkZWxldGVGb3JtLnNldEFwaUNhbGxpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChpZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgZGVsZXRlRm9ybS5jbG9zZSgpO1xyXG4gICAgICBjYXJkU2VjdGlvbi5yZW1vdmVJdGVtKGlkKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PlxyXG4gICAgICBjb25zb2xlLmxvZyhgQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiBkZWxldGluZyBjYXJkOiAke2Vycn1gKVxyXG4gICAgKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gZGVsZXRlRm9ybS5zZXRBcGlDYWxsaW5nKGZhbHNlKSk7XHJcbn0pO1xyXG5kZWxldGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBDcmVhdGUgYSBmdW5jdGlvbiB0byBjcmVhdGUgY2FyZCBpbnN0YW5jZXNcclxuY29uc3QgY2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBjYXJkRGF0YTogeyAuLi5kYXRhLCB1c2VySWQgfSxcclxuICAgICAgaGFuZGxlQ2FyZFByZXZpZXc6IChpbWdEYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZFByZXZpZXdNb2RhbC5vcGVuKGltZ0RhdGEpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVEZWxldGVDbGljazogKGlkKSA9PiB7XHJcbiAgICAgICAgZGVsZXRlRm9ybS5zZXREZWxDYXJkSWQoaWQpO1xyXG4gICAgICAgIGRlbGV0ZUZvcm0ub3BlbigpO1xyXG4gICAgICB9LFxyXG4gICAgICBoYW5kbGVDYXJkTGlrZTogKGlkLCBpc0xpa2VkKSA9PiB7XHJcbiAgICAgICAgaWYgKGlzTGlrZWQpIHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAucmVtb3ZlTGlrZShpZClcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYEFuIGVycm9yIG9jY3VycmVkIHdoZW4gcmVtb3ZpbmcgYSBsaWtlOiAke2Vycn1gKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmFkZExpa2UoaWQpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PlxyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBbiBlcnJvciBvY2N1cnJlZCB3aGVuIGFkZGluZyBhIGxpa2U6ICR7ZXJyfWApXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBjYXJkU2VsZWN0b3I6IHNlbGVjdG9ycy5jYXJkVGVtcGxhdGVcclxuICAgIH0sXHJcbiAgICBcclxuICApO1xyXG4gIHJldHVybiBjYXJkLmdldFZpZXcoKTtcclxufTtcclxuXHJcbi8vIEluc3RhbmNlIG9mIHRoZSBVc2VySW5mbyBjbGFzc1xyXG5jb25zdCBuZXdVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlTmFtZVwiLFxyXG4gIGRlc2NTZWxlY3RvcjogXCIjcHJvZmlsZURlc2NyaXB0aW9uXCIsXHJcbiAgYXZhdGFyU2VsZWN0b3I6IFwiI3Byb2ZpbGVJbWFnZVwiLFxyXG59KTtcclxuXHJcbi8vIGdldCB3ZWIgc2VydmVyIGluZm8sIGNhcmRzIGFuZCB1c2VyIGRhdGEuXHJcbmFwaVxyXG4gIC5nZXRXZWJwYWdlSW5mbygpXHJcbiAgLnRoZW4oKFtjYXJkRGF0YSwgdXNlckRhdGFdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmREYXRhLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkKGRhdGEpO1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuY2FyZHNcIlxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgICBuZXdVc2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5hYm91dCxcclxuICAgIH0pO1xyXG4gICAgbmV3VXNlckluZm8uc2V0QXZhdGFyKHVzZXJEYXRhLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT5cclxuICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICBgQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiBsb2FkaW5nIGluaXRpYWwgdXNlciBhbmQgY2FyZCBkYXRhOiAke2Vycn1gXHJcbiAgICApXHJcbiAgKTtcclxuXHJcbmNvbnN0IGNhcmRBZGRGb3JtID0gbmV3IE1vZGFsV2l0aEZvcm0oXCIjY2FyZEFkZE1vZGFsXCIsIChkYXRhKSA9PiB7XHJcbiAgY29uc3QgbmV3Q2FyZCA9IHsgbmFtZTogZGF0YVsnY2FyZC10aXRsZS1pbnB1dCddLCBsaW5rOiBkYXRhWydjYXJkLWltYWdlLWlucHV0J10gfTtcclxuICBjYXJkQWRkRm9ybS5zZXRBcGlDYWxsaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmFkZENhcmQobmV3Q2FyZClcclxuICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkKHJlc3VsdCk7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICBjYXJkQWRkRm9ybS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PlxyXG4gICAgICBjb25zb2xlLmxvZyhgQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiBsb2FkaW5nIG5ldyBjYXJkIGRhdGE6ICR7ZXJyfWApXHJcbiAgICApXHJcbiAgICAuZmluYWxseSgoKSA9PiBjYXJkQWRkRm9ybS5zZXRBcGlDYWxsaW5nKGZhbHNlKSk7XHJcbn0pO1xyXG5jYXJkQWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgY2FyZEFkZEZvcm0ub3BlbigpO1xyXG59KTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgc2VsZWN0b3JzLmFkZEZvcm1cclxuKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBuZXcgTW9kYWxXaXRoRm9ybShcIiNwcm9maWxlRWRpdE1vZGFsXCIsIChkYXRhKSA9PiB7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLnNldEFwaUNhbGxpbmcodHJ1ZSk7XHJcbiAgYXBpLmdldFByb2ZpbGVJbmZvKGRhdGEpXHJcbiAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgIG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xyXG4gICAgICBlZGl0UHJvZmlsZUZvcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT5cclxuICAgICAgY29uc29sZS5sb2coYEFuIGVycm9yIG9jY3VycmVkIHdoZW4gbG9hZGluZyB1c2VyIHByb2ZpbGUgZGF0YTogJHtlcnJ9YClcclxuICAgIClcclxuICAgIC5maW5hbGx5KCgpID0+IGVkaXRQcm9maWxlRm9ybS5zZXRBcGlDYWxsaW5nKGZhbHNlKSk7XHJcbn0pO1xyXG5lZGl0UHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyB1c2VyTmFtZSwgdXNlckRlc2NyaXB0aW9uIH0gPSBuZXdVc2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSB1c2VyTmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJEZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIHZhbGlkYXRpb25Db25maWcsXHJcbiAgc2VsZWN0b3JzLmVkaXRGb3JtXHJcbik7XHJcbmVkaXRQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCB1cGRhdGVBdmF0YXJGb3JtID0gbmV3IE1vZGFsV2l0aEZvcm0oc2VsZWN0b3JzLmF2YXRhck1vZGFsLCAoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IGF2YXRhckxpbmsgPSBkYXRhLmF2YXRhcjtcclxuICB1cGRhdGVBdmF0YXJGb3JtLnNldEFwaUNhbGxpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuc2V0UHJvZmlsZUltYWdlKGF2YXRhckxpbmspXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBuZXdVc2VySW5mby5zZXRBdmF0YXIoYXZhdGFyTGluayk7XHJcbiAgICAgIHVwZGF0ZUF2YXRhckZvcm0uY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT5cclxuICAgICAgY29uc29sZS5sb2coYEFuIGVycm9yIG9jY3VyZWQgd2hlbiBsb2FkaW5nIGF2YXRhciBkYXRhOiAke2Vycn1gKVxyXG4gICAgKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4gdXBkYXRlQXZhdGFyRm9ybS5zZXRBcGlDYWxsaW5nKGZhbHNlKSk7XHJcbn0pO1xyXG51cGRhdGVBdmF0YXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBzZWxlY3RvcnMuYXZhdGFyRm9ybVxyXG4pO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxucHJvZmlsZUltYWdlRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhckZvcm1WYWxpZGF0b3IuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgdXBkYXRlQXZhdGFyRm9ybS5vcGVuKCk7XHJcbn0pO1xyXG5cclxuXHJcbiIsIi8vIFRva2VuID0gXCI2OGE4NzgxZC0wZWY2LTRmMzEtOGEwMC1mOTU0NzM2NzZiMjNcIlxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRQcm9maWxlSW1hZ2UodXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHVybCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldFByb2ZpbGVJbmZvKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRXZWJwYWdlSW5mbygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgICAgbGluazogZGF0YS5saW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxufVxyXG4iLCIvL01vZGFsV2l0aEltYWdlcy5qc1xyXG4vLyBJbXBvcnQgdGhlIE1vZGFsIGNsYXNzIGZyb20gdGhlIHNwZWNpZmllZCBwYXRoXHJcbmltcG9ydCBNb2RhbCBmcm9tIFwiLi4vY29tcG9uZW50cy9Nb2RhbC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2RhbFdpdGhJbWFnZSBleHRlbmRzIE1vZGFsIHtcclxuXHJcbiAgLy8gQ29uc3RydWN0b3IgZm9yIGluaXRpYWxpemluZyB0aGUgaW1hZ2UgbW9kYWxcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX21vZGFsSW1hZ2UgPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCIpO1xyXG4gICAgdGhpcy5fbW9kYWxDYXB0aW9uID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byBvcGVuIHRoZSBpbWFnZSBtb2RhbCB3aXRoIHByb3ZpZGVkIGNhcmQgZGF0YVxyXG4gIG9wZW4oY2FyZERhdGEpIHtcclxuICAgIHRoaXMuX21vZGFsSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX21vZGFsSW1hZ2UuYWx0ID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX21vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJpbXBvcnQgTW9kYWwgZnJvbSBcIi4vTW9kYWwuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGFsV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIE1vZGFsIHtcclxuICBjb25zdHJ1Y3Rvcihtb2RhbFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihtb2RhbFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX21vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0gPSB0aGlzLl9tb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fZGVsQ2FyZElucHV0ID0gdGhpcy5fbW9kYWwucXVlcnlTZWxlY3RvcihcIiNkZWxDYXJkSWRcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHNldEFwaUNhbGxpbmcoaXNDYWxsaW5nKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBpc0NhbGxpbmcgPyBcIkRlbGV0aW5nIC4uLlwiIDogXCJZZXNcIjtcclxuICB9XHJcblxyXG4gIHNldERlbENhcmRJZChpZCkge1xyXG4gICAgdGhpcy5fZGVsQ2FyZElucHV0LnZhbHVlID0gaWQ7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9tb2RhbEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9kZWxDYXJkSW5wdXQudmFsdWUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG4iLCIvL1VzZXJJbmZvLmpzXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAvLyBDb25zdHJ1Y3RvciB0byBpbml0aWFsaXplIHNlbGVjdG9ycyBmb3IgdXNlciBuYW1lIGFuZCBkZXNjcmlwdGlvblxyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBkZXNjU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihkZXNjU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fdXNlckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRBdmF0YXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdXNlckltYWdlLnNyYztcclxuICB9XHJcblxyXG4gIHNldEF2YXRhcihsaW5rKSB7XHJcbiAgICB0aGlzLl91c2VySW1hZ2Uuc3JjID0gbGluaztcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byByZXRyaWV2ZSB1c2VyIGluZm9ybWF0aW9uIGZyb20gRE9NXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJEZXNjcmlwdGlvbjogdGhpcy5fdXNlckRlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vIE1ldGhvZCB0byBzZXQgdXNlciBpbmZvcm1hdGlvbiBpbiB0aGUgRE9NXHJcbiAgc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl91c2VyRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnRTZWxlY3RvciIsInRoaXMiLCJfc2V0dGluZ3MiLCJfZm9ybUVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiaW5wdXRFbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2xhc3NMaXN0IiwiYWRkIiwiZXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsInJlbW92ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJkaXNhYmxlZCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInZhbGlkYXRpb25Db25maWciLCJhZGRDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlSW1hZ2VFZGl0IiwiQ2FyZCIsIl9yZWYiLCJjYXJkRGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRQcmV2aWV3IiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVDYXJkTGlrZSIsIl9pZCIsIl90ZXh0IiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlUHJldmlld0ltYWdlIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlQ2FyZExpa2UiLCJfZ2V0VGVtcGxhdGUiLCJjYXJkIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9zZXRDYXJkVGV4dCIsIl9lbGVtZW50IiwiX3NldENhcmRJbWFnZSIsIl9pbWFnZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJfc2V0Q2FyZExpa2UiLCJfbGlrZUJ1dHRvbiIsIl90b2dnbGVMaWtlIiwidG9nZ2xlIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZGVsZXRlQnV0dG9uIiwiX2RlbGV0ZUNhcmQiLCJnZXRWaWV3IiwidXBkYXRlTGlrZXMiLCJsaWtlIiwiTW9kYWwiLCJtb2RhbFNlbGVjdG9yIiwiX21vZGFsIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZUJ1dHRvbiIsImtleSIsImNvZGUiLCJjbG9zZSIsIm9wZW4iLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIk1vZGFsV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9tb2RhbEZvcm0iLCJfc3VibWl0QnRuIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJzZXRBcGlDYWxsaW5nIiwiaXNTYXZpbmciLCJzZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsInJlbW92ZUl0ZW0iLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsInNldFByb2ZpbGVJbWFnZSIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwiZ2V0UHJvZmlsZUluZm8iLCJkYXRhIiwiYWJvdXQiLCJkZXNjcmlwdGlvbiIsImdldEluaXRpYWxDYXJkcyIsImdldFdlYnBhZ2VJbmZvIiwiYWxsIiwiYWRkQ2FyZCIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsImF1dGhvcml6YXRpb24iLCJ1c2VySWQiLCJjYXJkU2VjdGlvbiIsImNhcmRQcmV2aWV3TW9kYWwiLCJfbW9kYWxJbWFnZSIsIl9tb2RhbENhcHRpb24iLCJkZWxldGVGb3JtIiwiX2RlbENhcmRJbnB1dCIsImlzQ2FsbGluZyIsInNldERlbENhcmRJZCIsImV2ZW50IiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsImltZ0RhdGEiLCJsaWtlcyIsIm5ld1VzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiZGVzY1NlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckRlc2NyaXB0aW9uIiwiX3VzZXJJbWFnZSIsImdldEF2YXRhciIsInNldEF2YXRhciIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwic2V0VXNlckluZm8iLCJfcmVmMiIsInVzZXJEYXRhIiwiY2FyZEVsZW1lbnQiLCJjYXJkQWRkRm9ybSIsIm5ld0NhcmQiLCJyZXN1bHQiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZWRpdFByb2ZpbGVGb3JtIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwidXBkYXRlQXZhdGFyRm9ybSIsImF2YXRhckxpbmsiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==